<% provide(:title, 'Course / ' + @course.name) %>

  <div class="card">
    <div class="card-header col-12">
      <h1 class="card-title lessons-title"><%= @course.name %> - Lessons</h1>
      <%= link_to "New Lesson", new_admin_lesson_path, class: "card-title lessons-title float-right"  %>
    </div>
    <!-- /.card-header -->
    <div class="card-body">
      <table class="table table-bordered">
        <thead>
        <tr>
          <th style="width: 10px">#</th>
          <th>Task</th>
          <th>Progress</th>
          <th style="width: 40px">Label</th>
        </tr>
        </thead>
        <tbody>
        <%
          progress_color = {
            25 => 'bg-danger',
            50 => 'bg-warning',
            75 => 'bg-primary',
            100 => 'bg-success'
          }
          order_number = 0
          if @course.present? && @course.lessons.any?
            @course.lessons.each do |lesson|
              progress = rand(1..100)

              selected_color = nil
              progress_color.each do |key, color|
                if progress < key
                  selected_color = color
                  break
                end
              end
        %>

          <tr>
              <td><%= order_number+= 1 %></td>
              <td><%= link_to lesson.name, edit_admin_lesson_path(lesson)%></td>
              <td>
                <div class="progress progress-xs">
                  <div class="progress-bar <%= selected_color %>" style="width: <%= progress %>%"></div>
                </div>
              </td>
              <td><span class="badge <%= selected_color %>"><%= progress %>%</span></td>
          </tr>
          <% end %>
        <% end %>
        </tbody>
      </table>
    </div>
    <!-- /.card-body -->
    <div class="card-footer clearfix">
      <ul class="pagination pagination-sm m-0 float-right">
        <li class="page-item"><a class="page-link" href="#">&laquo;</a></li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">&raquo;</a></li>
      </ul>
    </div>
  <!-- /.card -->
</div>

